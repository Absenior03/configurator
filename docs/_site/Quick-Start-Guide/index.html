<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Quick-Start-Guide - Configurator</title>
<meta name="description" content="Building and Deploying Configurator">


  <meta name="author" content="Adeesh Devanand">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Configurator">
<meta property="og:title" content="Quick-Start-Guide">
<meta property="og:url" content="http://localhost:4000/configurator/Quick-Start-Guide/">


  <meta property="og:description" content="Building and Deploying Configurator">



  <meta property="og:image" content="http://localhost:4000/configurator/assets/images/configurator.png">



  <meta name="twitter:site" content="@configuratork8s">
  <meta name="twitter:title" content="Quick-Start-Guide">
  <meta name="twitter:description" content="Building and Deploying Configurator">
  <meta name="twitter:url" content="http://localhost:4000/configurator/Quick-Start-Guide/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="http://localhost:4000/configurator/assets/images/configurator.png">
    
  

  








<link rel="canonical" href="http://localhost:4000/configurator/Quick-Start-Guide/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Adeesh Devanand",
      "url": "http://localhost:4000/configurator/",
      "sameAs": ["https://twitter.com/confuguratork8s"]
    
  }
</script>


  <meta name="google-site-verification" content="UQj93ERU9zgECodaaXgVpkjrFn9UrDMEzVamacSoQ8Y" />






<!-- end _includes/seo.html -->



  <link href="/configurator/feed.xml" type="application/atom+xml" rel="alternate" title="Configurator Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/configurator/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/configurator/"><img src="/configurator/assets/images/configurator.png" alt="Configurator"></a>
        
        <a class="site-title" href="/configurator/">
          Configurator
          <span class="site-subtitle">Sync Service for ConfigMaps</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/configurator/Quick-Start-Guide/">Quick-Start Guide</a>
            </li><li class="masthead__menu-item">
              <a href="/configurator/contribute/contributing/">Contribution</a>
            </li><li class="masthead__menu-item">
              <a href="/configurator/year-archive/">Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/configurator/docs/Introduction/">Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/configurator/license/">License</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Quick-Start-Guide">
    <meta itemprop="description" content="Building and Deploying Configurator">
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Quick-Start-Guide
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#supported-versions">Supported Versions</a></li><li><a href="#building-and-deploying-configurator">Building and Deploying Configurator</a></li><li><a href="#removing-configurator">Removing Configurator</a></li><li><a href="#deploy-configurator-using-yaml-files">Deploy Configurator using YAML files</a></li><li><a href="#using-configurator">Using Configurator</a></li><li><a href="#listing-and-viewing-the-custom-configmaps-and-secrets">Listing and Viewing the Custom ConfigMaps and Secrets</a></li><li><a href="#architecture">Architecture</a></li><li><a href="#pull-requests">Pull Requests</a></li></ul>

            </nav>
          </aside>
        
        <h3 id="supported-versions">Supported Versions</h3>
<ul>
  <li>K8s 1.16+</li>
</ul>

<h3 id="building-and-deploying-configurator">Building and Deploying Configurator</h3>
<p>Build the source code and the docker image for Configurator. Push the image to registry and deploy configurator in the cluster.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make clean build push deploy 
</code></pre></div></div>

<h3 id="removing-configurator">Removing Configurator</h3>
<p>Remove the configurator deployment from cluster and delete local binary and docker image</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make remove clean 
</code></pre></div></div>

<h3 id="deploy-configurator-using-yaml-files">Deploy Configurator using YAML files</h3>
<p>YAML files for deploying the latest version of Configurator is available under the deploy folder.You need to deploy the CRDs, the controller and the service/role binding.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> deploy/crd-customConfigMap.yaml
kubectl apply <span class="nt">-f</span> deploy/crd-customSecret.yaml
kubectl create ns configurator
kubectl apply <span class="nt">-f</span> deploy/configurator-clusterrole.yaml
kubectl apply <span class="nt">-f</span> deploy/configurator-clusterrolebinding.yaml
kubectl apply <span class="nt">-f</span> deploy/configurator-serviceaccount.yaml
kubectl apply <span class="nt">-f</span> deploy/configurator-deployment.yaml
</code></pre></div></div>
<p>Verify if configurator resources are created successfully.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get deployment <span class="nt">-n</span> configurator
NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE
configurator-controller              1/1     1            1           4h38m
</code></pre></div></div>

<h3 id="using-configurator">Using Configurator</h3>
<p>Once configurator is deployed in the cluster, start creating customConfigMaps. Example customConfigMaps are available under artifacts/examples folder.
Create customConfigMap. This will create a configMap with a postfix.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span> artifacts/exmaples/example-customConfigMap.yaml
</code></pre></div></div>
<p>List the configMap and make a note of the postfix for the first time.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get configMap <span class="nt">-n</span> <span class="nb">test
</span>NAME               DATA   AGE
testconfig-srseq   1      9s
</code></pre></div></div>
<p>Here “srseq” is the postfix.
Create deployment referencing the newly created configMap and its postfix. Please note the deployment metadata label must contain the config name and the config postfix that was created initially. say <configname>=<postfix>. Under the VolumeMounts section use the complete name of the configMap along with the postfix.</postfix></configname></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">busybox-deployment</span>
  <span class="na">labels</span><span class="pi">:</span>
   <span class="na">testconfig</span><span class="pi">:</span> <span class="s">srseq</span>
    <span class="s">app</span><span class="pi">:</span> <span class="s">busybox</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">revisionHistoryLimit</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">strategy</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">RollingUpdate</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">busybox</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">busybox</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">busybox</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">busybox</span>
        <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
        <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">sh'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">-c'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">echo</span><span class="nv"> </span><span class="s">Container</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">Running</span><span class="nv"> </span><span class="s">;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">3600'</span><span class="pi">]</span>
        <span class="na">volumeMounts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/test</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">test-config</span>
      <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">test-config</span>
        <span class="na">configMap</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">testconfig-srseq</span>
</code></pre></div></div>
<p>From now, you can directly update the customConfigMap and this will create a configMap with a new postfix and will automatically sync up the related deployments with the newly created configMap.
Same functionality applies for secrets as well.</p>

<h3 id="listing-and-viewing-the-custom-configmaps-and-secrets">Listing and Viewing the Custom ConfigMaps and Secrets</h3>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get ccm <span class="nt">-n</span> &lt;namespace&gt;
kubectl get customconfigmap <span class="nt">-n</span> &lt;namespace&gt;
kubectl describe ccm <span class="nt">-n</span> &lt;namespace&gt;
kubectl describe customconfigmap <span class="nt">-n</span> &lt;namespace&gt;
kubectl delete ccm <span class="nt">-n</span> &lt;namespace&gt;
kubectl delete customconfigmap <span class="nt">-n</span> &lt;namespace&gt;
kubectl get customsecret <span class="nt">-n</span> &lt;namespace&gt;
kubectl get ccs <span class="nt">-n</span> &lt;namespace&gt;
kubectl describe customsecret <span class="nt">-n</span> &lt;namespace&gt;
kubectl describe ccs <span class="nt">-n</span> &lt;namespace&gt;
kubectl delete customsecret <span class="nt">-n</span> &lt;namespace&gt;
kubectl delete ccs <span class="nt">-n</span> &lt;namespace&gt;
</code></pre></div></div>

<h3 id="architecture">Architecture</h3>
<p><img src="https://gopaddle-marketing.s3.ap-southeast-2.amazonaws.com/configurartor-architecture.png" /></p>

<h3 id="pull-requests">Pull Requests</h3>
<ol>
  <li>Fetch the latest code from master branch and resolve any conflicts before sending a pull request.</li>
  <li>Make sure you build and test the changes before sending a pull request.</li>
  <li>Ensure the README is updated with any interface or architecture changes.</li>
</ol>

<h2 id="maintainers">Maintainers</h2>
<p>Congurator is maintained by <a href="https://gopaddle.io">gopaddle.io</a> team.</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

      <div align="center" style="margin: 1em 0;">
        <ins class="adsbygoogle"
             style="display:block; border-bottom: initial;"
             data-ad-client="ca-pub-7328585512091257"
             data-ad-slot="3049671934"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
      </div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/configurator/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Adeesh Devanand. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/configurator/assets/js/main.min.js"></script>




<script src="/configurator/assets/js/lunr/lunr.min.js"></script>
<script src="/configurator/assets/js/lunr/lunr-store.js"></script>
<script src="/configurator/assets/js/lunr/lunr-en.js"></script>






    <style>
      .google-auto-placed {
        margin: 2em auto;
      }
    </style>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  </body>
</html>
